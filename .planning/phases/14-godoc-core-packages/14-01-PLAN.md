---
phase: 14-godoc-core-packages
plan: 01
type: execute
---

<objective>
Add comprehensive go doc comments to the internal/claude package.

Purpose: Enable `go doc` to generate useful documentation for the Claude CLI integration layer.
Output: All exported types, interfaces, functions, and methods in internal/claude have complete doc comments.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/CONVENTIONS.md

**Package overview:**

- `internal/claude` - Claude CLI integration and JSON parsing
- Files: client.go, parser.go, types.go
- Current state: Basic doc comments exist, needs enhancement for go doc quality

**Go doc comment conventions:**

- Package comment: First sentence is package summary
- Type/function comment: First sentence is one-line summary
- Document exported items only (unexported items optional)
- Use complete sentences ending in periods
- Reference related types/functions with square brackets: [Executor]
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance types.go documentation</name>
  <files>internal/claude/types.go</files>
  <action>
Enhance the package-level doc comment with:
- One-line summary (existing is good)
- Brief overview of what the package provides
- List of key types ([Executor], [Parser], [Event])

For each exported type add/enhance doc comments:

- StreamEvent: Explain JSON structure mapping, when it's used
- MessageContent: Explain its role in streaming output
- ContentBlock: Document the type field values (text, tool_use)
- ToolInput: Document optional fields and which tools use them
- ToolResult: Document stdout/stderr/interrupted semantics
- EventType: Document the enum values and their meanings
- Event: Document as the primary type users interact with, explain convenience methods
- Constants (EventTypeSystem, etc.): Brief description of each

For convenience methods (IsText, IsToolUse, IsToolResult):

- Document what each checks and when to use it
  </action>
  <verify>go doc ./internal/claude shows enhanced documentation; go doc ./internal/claude.Event shows complete type docs</verify>
  <done>All exported types in types.go have complete doc comments visible in go doc output</done>
  </task>

<task type="auto">
  <name>Task 2: Enhance client.go documentation</name>
  <files>internal/claude/client.go</files>
  <action>
Enhance doc comments for:

Executor interface:

- Expand interface doc to explain the two execution modes (fire-and-forget vs wait-for-result)
- Reference [Event] and [EventHandler]

EventHandler:

- Document when it's called and what users should do with events

ExecutorConfig:

- Document each field with valid values and defaults
- Note which fields are optional

DefaultExecutor:

- Document as the production implementation
- Note that it spawns Claude as subprocess

NewExecutor:

- Document parameter handling and defaults applied

Execute method:

- Document channel behavior (closed on completion)
- Note about exit status not being available

ExecuteWithResult method:

- Document as the primary method for production use
- Document exit code semantics

MockExecutor:

- Document as the test double
- Document how to configure it for different test scenarios
- Document RecordedPrompts for assertion
  </action>
  <verify>go doc ./internal/claude.Executor shows detailed interface docs; go doc ./internal/claude.MockExecutor shows test usage guidance</verify>
  <done>All exported types, interfaces, and functions in client.go have complete doc comments</done>
  </task>

<task type="auto">
  <name>Task 3: Enhance parser.go documentation</name>
  <files>internal/claude/parser.go</files>
  <action>
Enhance doc comments for:

Parser interface:

- Document the streaming protocol expectations
- Note that channel closes on EOF or error

DefaultParser:

- Document the stream-json format it parses
- Document BufferSize purpose (large JSON lines)

NewParser:

- Document the default buffer size

Parse method:

- Document goroutine behavior
- Document error handling (skips unparseable lines)
- Note about scanner.Err() handling

ParseSingle:

- Document as utility for testing/debugging
- Document error cases
  </action>
  <verify>go doc ./internal/claude.Parser shows complete interface docs; go doc ./internal/claude.ParseSingle shows utility function docs</verify>
  <done>All exported types and functions in parser.go have complete doc comments</done>
  </task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go doc ./internal/claude` shows package overview with key types
- [ ] `go doc ./internal/claude.Executor` shows detailed interface docs
- [ ] `go doc ./internal/claude.Event` shows complete type with methods
- [ ] `go doc ./internal/claude.MockExecutor` shows test usage
- [ ] `golangci-lint run ./internal/claude/...` passes
- [ ] No exported items without doc comments
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- go doc output is informative and useful for package users
- Doc comments follow Go conventions (complete sentences, first sentence is summary)
  </success_criteria>

<output>
After completion, create `.planning/phases/14-godoc-core-packages/14-01-SUMMARY.md`
</output>
