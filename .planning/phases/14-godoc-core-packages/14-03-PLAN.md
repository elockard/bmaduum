---
phase: 14-godoc-core-packages
plan: 03
type: execute
---

<objective>
Add comprehensive go doc comments to the internal/workflow package.

Purpose: Enable `go doc` to generate useful documentation for the workflow orchestration layer.
Output: All exported types, interfaces, functions, and methods in internal/workflow have complete doc comments.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/CONVENTIONS.md

**Package overview:**

- `internal/workflow` - Workflow orchestration for running Claude CLI
- Files: steps.go (has package doc), workflow.go, queue.go
- Current state: Package doc exists in steps.go, other files need enhancement

**Go doc comment conventions:**

- Package comment: First sentence is package summary
- Type/function comment: First sentence is one-line summary
- Document exported items only (unexported items optional)
- Use complete sentences ending in periods
- Reference related types/functions with square brackets: [Runner]
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance steps.go documentation</name>
  <files>internal/workflow/steps.go</files>
  <action>
Enhance the existing package comment:
- Current: "Package workflow provides workflow orchestration for bmad-automate."
- Add brief explanation of what workflows do (execute Claude CLI with prompts)
- List key types: [Runner], [QueueRunner], [Step]
- Mention the relationship with [claude.Executor]

Enhance type docs:
Step struct:

- Document as a workflow step definition
- Explain Name (workflow name) and Prompt (expanded template)

StepResult struct:

- Document as execution result
- Explain each field (Name, Duration, ExitCode, Success)

IsSuccess method:

- Document the convenience check (ExitCode == 0)
  </action>
  <verify>go doc ./internal/workflow shows enhanced package overview</verify>
  <done>Package doc and steps.go types have complete documentation</done>
  </task>

<task type="auto">
  <name>Task 2: Document workflow.go types and methods</name>
  <files>internal/workflow/workflow.go</files>
  <action>
Add/enhance doc comments for:

Runner struct:

- Document as the main workflow executor
- Explain dependencies (executor for Claude, printer for output, config for prompts)

NewRunner:

- Document each parameter's purpose
- Note that this is the primary constructor

RunSingle method:

- Document as single workflow execution
- Explain parameters (workflowName from config, storyKey for template)
- Document return value (exit code from Claude)

RunRaw method:

- Document as arbitrary prompt execution
- Explain when to use (custom/one-off prompts)

RunFullCycle method:

- Document as legacy full-cycle execution (deprecated by lifecycle package)
- Explain what full cycle means (all steps in sequence)
- Document the output format (header, steps, summary)

runClaude (unexported):

- Optionally document the internal execution flow

handleEvent (unexported):

- Optionally document event routing to printer
  </action>
  <verify>go doc ./internal/workflow.Runner shows complete type docs with all methods</verify>
  <done>All exported types and methods in workflow.go have complete doc comments</done>
  </task>

<task type="auto">
  <name>Task 3: Document queue.go types and methods</name>
  <files>internal/workflow/queue.go</files>
  <action>
Add/enhance doc comments for:

StatusReader interface:

- Document as the status lookup interface
- Note this is duplicated from lifecycle package (intentional for dependency inversion)

QueueRunner struct:

- Document as batch story processor
- Explain the relationship with [Runner]

NewQueueRunner:

- Document the runner dependency

RunQueueWithStatus method:

- Document as the main queue execution method
- Explain the status-based routing behavior
- Document skip behavior for done stories
- Document fail-fast behavior (stops on first failure)
- Explain the output format (header, per-story progress, summary)
- Document return value (exit code from first failed story, or 0)
  </action>
  <verify>go doc ./internal/workflow.QueueRunner shows complete type docs; go doc ./internal/workflow.StatusReader shows interface docs</verify>
  <done>All exported types and methods in queue.go have complete doc comments</done>
  </task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go doc ./internal/workflow` shows enhanced package overview
- [ ] `go doc ./internal/workflow.Runner` shows detailed type docs
- [ ] `go doc ./internal/workflow.QueueRunner` shows detailed type docs
- [ ] `go doc ./internal/workflow.Step` shows type docs
- [ ] `golangci-lint run ./internal/workflow/...` passes
- [ ] No exported items without doc comments
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- go doc output is informative and useful for package users
- Doc comments follow Go conventions (complete sentences, first sentence is summary)
- Phase 14 complete
  </success_criteria>

<output>
After completion, create `.planning/phases/14-godoc-core-packages/14-03-SUMMARY.md`
</output>
